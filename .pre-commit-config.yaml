# See https://pre-commit.com for more information
# See https://pre-commit.com/hooks.html for more hooks

repos:
  # Shell script formatting and linting
  - repo: https://github.com/mvdan/shfmt
    rev: v3.8.0
    hooks:
      - id: shfmt
        name: Format shell scripts
        description: Format shell scripts with shfmt.
        types: [shell]
        args: [-w, -i=4, -ci]

  - repo: https://github.com/koalaman/shellcheck-precommit
    rev: v0.10.0
    hooks:
      - id: shellcheck
        name: Lint shell scripts
        description: Lint shell scripts with ShellCheck.
        types: [shell]
        args: [--severity=warning]

  # Dockerfile linting
  - repo: https://github.com/hadolint/hadolint
    rev: v2.12.0
    hooks:
      - id: hadolint
        name: Lint Dockerfiles
        description: Lint Dockerfiles with Hadolint.
        types: [dockerfile]

  # YAML validation
  - repo: https://github.com/pre-commit/mirrors-prettier
    rev: v3.1.0
    hooks:
      - id: prettier
        name: Format YAML files
        description: Format YAML files with Prettier.
        types: [yaml]
        args: [--write, --prose-wrap=always]

  # Markdown linting
  - repo: https://github.com/DavidAnson/markdownlint-cli2
    rev: v0.15.0
    hooks:
      - id: markdownlint-cli2
        name: Lint Markdown files
        description: Lint Markdown files with markdownlint-cli2.
        types: [markdown]
        files: ^(?!blogs/).*\.md$

  # JSON validation
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: check-json
        name: Validate JSON files
        description: Check that JSON files are valid.
        types: [json]

      - id: check-yaml
        name: Validate YAML files
        description: Check that YAML files are valid.
        types: [yaml]

  # Remove trailing whitespace
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: trailing-whitespace
        name: Remove trailing whitespace
        description: Removes trailing whitespace.
        types: [text]

  # Check for large files
  - repo: https://github.com/pre-commit/pre-commit-hooks
    rev: v5.0.0
    hooks:
      - id: check-added-large-files
        name: Check for large files
        description: Check for files larger than 5MB.
        args: ['--maxkb=5000']

ci:
  # Skip slow hooks on PRs that only touch documentation
  skip: [markdownlint-cli2]
